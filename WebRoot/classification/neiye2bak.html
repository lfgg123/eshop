<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Cache-Control" content="must-revalidate,no-cache"/>
	<meta name="viewport" content="width=device-width; initial-scale=1.0; minimum-scale=1.0; maximum-scale=1.0; user-scalable=no;"/>
	<title>919</title>
	<link href="../css/style.css" type="text/css" rel="stylesheet" />
	<link href="../css/swiper.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="../js/jquery.js"></script>
     <script type="text/javascript" src="../js/swiper.js"></script>
	<script type="text/javascript" src="../js/path.js?a=222"></script>
</head>
<body>

<div class="search">
	<a href=""><img src="../images/fl_03.png"></a><input type="text" id="productName" placeholder="搜索商品"><a href=""><img src="../images/fl_05.png" style="margin-left:1.2rem"></a><a href=""><img src="../images/shuang_03.png" style="margin-left:1.2rem"></a>
</div>
<ul class="paix">
	<li class="zongh">综合排序 <img src="../images/fl_13.png"></li>
	<li>价格</li>
	<li>销量</li>
	<li class="shai" id='shaixuan'>筛选 <img src="../images/fl_16.png"></li>
</ul>

<div class="jiuh">
	<dl>
		<dt><img src="../images/fl_28.png" alt=""></dt>
		<dd>
			<div>茅台品牌经典原浆</div>
			<span>销量：1000</span>
			<p>￥1000 <a><img src="../images/fl_24.png" alt=""></a></p>
		</dd>
	</dl>
	<dl>
		<dt><img src="../images/fl_21.png" alt=""></dt>
		<dd>
			<div>茅台品牌经典原浆</div>
			<span>销量：1000</span>
			<p>￥1000 <a><img src="../images/fl_24.png" alt=""></a></p>
		</dd>
	</dl>
	<dl>
		<dt><img src="../images/fl_21.png" alt=""></dt>
		<dd>
			<div>茅台品牌经典原浆</div>
			<span>销量：1000</span>
			<p>￥1000 <a><img src="../images/fl_24.png" alt=""></a></p>
		</dd>
	</dl>
	<dl>
		<dt><img src="../images/fl_28.png" alt=""></dt>
		<dd>
			<div>茅台品牌经典原浆</div>
			<span>销量：1000</span>
			<p>￥1000 <a><img src="../images/fl_24.png" alt=""></a></p>
		</dd>
	</dl>
</div>


<!-- 隐藏区域 -->
<div class="bzhezhao"></div>
<ul class="zhpx">
	<li class="zhpjc">综合评价<img src="../images/dui_03.png"></li>
	<li>评价最好</li>
	<li>最新商品</li>
</ul>

<div class="screen">
	<div class="screen_head"><span class="quxiao qxs">取消</span>筛选<span class="queding">确定</span></div>
	<ul class="sxs">
		<li>商品 <span class="zhuse" id="shangpinli">白酒 <img  src="../images/you_03.png"></span></li>
		<li>品牌 <span id="pinpaili">全部 <img src="../images/you_03.png"></span></li>
		<li>国家 <span id="guojiali">全部 <img src="../images/you_03.png"></span></li>
		<li class="jiage">价格 <span id="jiageli">全部 <img src="../images/you_03.png"></span></li>
	</ul>
	<div class="clear">清除筛选条件</div>
</div>


<div class="screens" id="shangpindiv">
	<div class="screen_heads"><span class="quxiaos qxss"><img src="../images/fl_03.png"></span>商品<!-- <span class="queding">确定</span> --></div>
	<ul class="sxss" id='shangpinul'>
		<li class="zhuse" onclick="changeClass(this)" >全部 <span class=""><img src="../images/dui_03.png"></span></li>
		<!--<li>白酒 <span class="zhuse"></span></li>
		<li>红酒 <span class="zhuse"></span></li>
		<li>洋酒 <span class="zhuse"></span></li>
		<li>滋补品 <span class="zhuse"></span></li>
		<li>茶礼 <span class="zhuse"></span></li>-->
	</ul>
</div>


<div class="screens" id="pinpaidiv">
	<div class="screen_heads"><span class="quxiaos qxss"><img src="../images/fl_03.png"></span>品牌<!-- <span class="queding">确定</span> --></div>
	<ul class="sxss" id='pinpaiul'>
		<li class="zhuse">全部 <span class="zhuse"><img src="../images/dui_03.png"></span></li>
		<!--<li>白酒 <span class="zhuse"></span></li>
		<li>红酒 <span class="zhuse"></span></li>
		<li>洋酒 <span class="zhuse"></span></li>
		<li>滋补品 <span class="zhuse"></span></li>
		<li>茶礼 <span class="zhuse"></span></li>-->
		<!--<li proclass="ifwptiqtireptiqete">红酒 <span class="zhuse"></span></li><li proclass="tttttttttttttttttttttttttttttt">洋酒 <span class="zhuse"></span></li><li proclass="ec1b53847c0348d1824f0bcead68252b">白酒 <span class="zhuse"></span></li>-->
	</ul> 
</div>

<div class="screens" id="guojiadiv">
	<div class="screen_heads"><span class="quxiaos qxss"><img src="../images/fl_03.png"></span>国家<!-- <span class="queding">确定</span> --></div>
	<ul class="sxss" id='guojiaul'>
		<li class="zhuse">全部 <span class="zhuse"><img src="../images/dui_03.png"></span></li>
		<!--<li>白酒 <span class="zhuse"></span></li>
		<li>红酒 <span class="zhuse"></span></li>
		<li>洋酒 <span class="zhuse"></span></li>
		<li>滋补品 <span class="zhuse"></span></li>
		<li>茶礼 <span class="zhuse"></span></li>-->
	</ul>
</div>

<div class="screenz">
	<div class="screen_heads"><span class="quxiaos qxsz"><img src="../images/fl_03.png"></span>价格<!-- <span class="queding">确定</span> --></div>
	<ul class="sxss">
		<li class="zhuse">全部 </li>
		<li>价格区间：<input type="text"> - <input type="text"><span class="zhuse"><img src="../images/dui_03.png"></span></li>
	</ul>
</div>

<input id="choseClass" type="hidden" value=""  />
<input id="choseBrand" type="hidden"  value=""/>
<input id="choseNation" type="hidden" value="" />
<input id="chosePrice" type="hidden" value="" />

<input id="userId" type="hidden" value=65 />
<input id="userName" type="hidden" value="testNick" />
<input id="userImage" type="hidden" value="testNick.jpg" />
<!-- 隐藏区域 -->
<div class="zhezhao"></div>
<input type="hidden" id="initialproClass" value="baijiuClass" tagName="白酒"  />

<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/swiper.js"></script>
<script type="text/javascript">
var testdata1={"code":1,"message":"操作成功","result":[{"name":"红酒","parent":"","id":1,"modifyTime":1508910641000,"createTime":1508347113000,"guid":"ifwptiqtireptiqete","grade":1,"pic":"6ea3de83432e4b93b562461ba410879b.png"},{"name":"洋酒","parent":"","id":4,"modifyTime":1508910453000,"createTime":1508859358000,"guid":"tttttttttttttttttttttttttttttt","grade":1,"pic":"25a7db51de7a4196bf0caa79f8208700.png"},{"name":"白酒","parent":"","id":5,"modifyTime":null,"createTime":1508910425000,"guid":"ec1b53847c0348d1824f0bcead68252b","grade":1,"pic":"a3ad19fdeb334544bb1fd9f99578100d.png"}]}
var testdata2={
    "code": 1,
    "message": "操作成功",
    "result": [
        {
            "name": "天之蓝",
            "id": 1,
            "guid": "1",
            "price": 800,
            "createTime": null,
            "image": null,
            "modifyTime": null,
            "remark": null,
            "proGuid": "1",
            "stock": 1000,
            "salenum": null,
            "isHot": 0,
            "isGround": 0,
            "seoDescription": null,
            "seoKeywords": null,
            "seoTitle": null
        },
		{
            "name": "海之蓝",
            "id": 1,
            "guid": "1",
            "price": 800,
            "createTime": null,
            "image": null,
            "modifyTime": null,
            "remark": null,
            "proGuid": "1",
            "stock": 1000,
            "salenum": null,
            "isHot": 0,
            "isGround": 0,
            "seoDescription": null,
            "seoKeywords": null,
            "seoTitle": null
        },
		{
            "name": "叶之绿",
            "id": 1,
            "guid": "1",
            "price": 800,
            "createTime": null,
            "image": null,
            "modifyTime": null,
            "remark": null,
            "proGuid": "1",
            "stock": 1000,
            "salenum": null,
            "isHot": 0,
            "isGround": 0,
            "seoDescription": null,
            "seoKeywords": null,
            "seoTitle": null
        }
    ]
};
	$(function(){
		$('.bzhezhao').hide();
		$('.zhpx').hide();
		$('.zongh').click(function(){
			$('.bzhezhao').show();
			$('.zhpx').show();
		});
		$('.zhpx li').click(function(){
			$('.bzhezhao').hide();
			$('.zhpx').hide();
		});


		$('.zhezhao').hide();
		$('.screen').hide();
		$('.shai').click(function(){
			$('.zhezhao').show();
			$('.screen').show();
			//加载默认种类
            $("#shangpinli").html($("#initialproClass").attr('tagName')+' <img src="../images/you_03.png">');
			//获取所有分类，并打钩当前默认分类
            getAllProClass();
		});

		$('.qxs').click(function(){
			$('.screen').hide();
			$('.zhezhao').hide();
		});

		$('.screens').hide();
		//展示商品类别列表
		$('.sxs li:nth-child(1)').click(function(){
			//$('.screens').show();
			$("#shangpindiv").show();
		});
        //展示品牌列表
		$('.sxs li:nth-child(2)').click(function(){
			//根据分类获取品牌		
			getBrandByClass();
			$('#pinpaidiv').show();	
		});
		//展示国家列表
		$('.sxs li:nth-child(3)').click(function(){
			$('#guojiadiv').show();
		});

		$('.qxss').click(function(){
			$('.screens').hide();
		});


		$('.screenz').hide();
		$('.jiage').click(function(){
			$('.screenz').show();
		});
		$('.qxsz').click(function(){
			$('.screenz').hide();
		});

	});

		//绑定数据
	$(document).ready(function(){ 
		 var curUrl=window.location.href;
		//var userId=curUrl.split('?')[1].split('&')[0].replace("userId=","");
		//var userName=curUrl.split('?')[1].split('&')[1].replace("userName=","");
		//userName=decodeURI(userName);
		//var userImage=curUrl.split('?')[1].split('&')[2].replace("userImage=","");
		//userImage=decodeURI(userImage);
		//var brand=curUrl.split('?')[1].split('&')[3].replace("brand=","");
		//var proClass=curUrl.split('?')[1].split('&')[4].replace("proClass=","");
		//$("#brand").val(brand);
		//$("#userName").val(userName);
		//$("#userId").val(userId);
		//$("#userImage").val(userImage);
		 //初始化默认种类
		 //$("#initialproClass").val(proClass);
		//$("#initialproClass").attr('tagName',proClassName);
		getAllProClass();
		 //初始化加载列表
         //loadDataByBrand();
		 //点击筛选加载种类
         //$("#shaixuan").click(function(){

		 //});
	});
    //获取所有以及分类
	function getAllProClass()
	{
		//后台请求
		$.ajax({
			url:path+'app/goods/getFirstGradeGoodsClass',
			type: "GET",
			dataType: "JSON",
			//dataType: "jsonp", 
			//jsonp:"callback", //这里定义了callback的参数名称，以便服务获取callback的函数名即getMessage  
			//jsonpCallback:"handleResponse", //这里定义了jsonp的回调函数  
			cache: false,
			async: true,
			//processData: false,
			//timeout: 2000,
			success: function (data) {
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
						    str=str+'<li onclick="changeClass(this)" proclass="'+val.guid+'">'+val.name+' <span class="zhuse"><img style="display:none;" src="../images/dui_03.png"></span></li>';
							strhtml=strhtml+str;
						});
					}
					var allhtml=$("#shangpinul").html();
					console.log(allhtml+strhtml);
					//alert(allhtml+strhtml);
					$("#shangpinul").html(allhtml+strhtml);
					
				}
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				var strhtml="";
				var result=testdata1.result;
                $.each(result, function (index, val) {
					var str="";
					
					str=str+'<li onclick="changeClass(this)" proclass="'+val.guid+'">'+val.name+' <span class="zhuse"><img style="display:none;" src="../images/dui_03.png"></span></li>';
					strhtml=strhtml+str;
				});
				var allhtml=$("#shangpinul").html();
				$("#shangpinul").html(allhtml+strhtml);
			}
		});

	}
	//
	function changeClass(e){
		//$("."+etype).attr("class",etype);
		//$($(e).find("span")[0]).attr("class","zhuse "+etype); 
		var allspan=$(e).parent().find("span");  
		for(var j=0;j<allspan.length;j++){
			$($(allspan[j]).find("img")[0]).css("display","none");
		}
		$($($(e).find("span")[0]).find("img")[0]).css("display","");
		//记录选中商品
		var guid=$(e).attr("proclass");
		$("#choseClass").val(guid);
	}
	    //获取国家
	function getAllNation(){

	}
	function handleResponse(data) {
        console.log("搜索商品");
    }
	 function getBrandByClass(){}

	 //根据品牌加载产品列表(初始化)
	function loadDataByBrand()
	{
		var url=path+"app/getGoodsByProClass";
		var brand=$("#brand").val();
		if(brand==null||brand==undefined||brand=="")
		{
			alert("品牌加载出错");
            return false;
		}
		//后台请求
		$.ajax({
			url:url,
			type: "GET",
			data: {brand:brand},
			dataType: "JSON",
			//dataType: "jsonp", 
			//jsonp:"callback", //这里定义了callback的参数名称，以便服务获取callback的函数名即getMessage  
			//jsonpCallback:"handleResponse", //这里定义了jsonp的回调函数  
			cache: false,
			async: true,
			success: function (data) {
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
							str=str+'<dl>\
										<dt><img src="'+val.image+'" alt=""></dt>\
										<dd>\
											<div>'+val.productName+'</div>\
											<span>销量：'+val.salenum+'</span>\
											<p>￥'+val.priceArea+' <a href="javascript:void(0);" guid="'+val.guid+'" onclick="goodToCart(this)"><img src="../images/fl_24.png" alt=""></a></p>\
										</dd>\
									</dl>';
							strhtml=strhtml+str;
						})
					}
					$("#jiuh").html(strhtml);	
				}
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				var data=testdata2;
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
							str=str+'<dl>\
										<dt><img src="'+val.image+'" alt=""></dt>\
										<dd>\
											<div>'+val.productName+'</div>\
											<span>销量：'+val.salenum+'</span>\
											<p>￥'+val.priceArea+' <a href="javascript:void(0);" guid="'+val.guid+'" onclick="goodToCart(this)"><img src="../images/fl_24.png" alt=""></a></p>\
										</dd>\
									</dl>';
							strhtml=strhtml+str;
						})
					}
					$("#jiuh").html(strhtml);	
				}
			}
		});
	}

	function goodsfindProductListByName(){
		var url=path+"app/goodsfindProductListByName";
		var productName=$("#productName").val();
		if(productName==null||productName==undefined||productName=="")
		{
			alert("请输入品牌名称");
            return false;
		}
		//后台请求
		$.ajax({
			url:url,
			type: "GET",
			data: {productName:productName},
			dataType: "JSON",
			//dataType: "jsonp", 
			//jsonp:"callback", //这里定义了callback的参数名称，以便服务获取callback的函数名即getMessage  
			//jsonpCallback:"handleResponse", //这里定义了jsonp的回调函数  
			cache: false,
			async: true,
			success: function (data) {
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
							str=str+'<dl>\
									<dt><img src="'+val.image+'" alt=""></dt>\
									<dd>\
										<div>'+val.productName+'</div>\
										<span>销量：'+val.salenum+'</span>\
										<p>￥'+val.priceArea+' <a href="javascript:void(0);" guid="'+val.guid+'" onclick="goodToCart(this)"><img src="../images/fl_24.png" alt=""></a></p>\
									</dd>\
								</dl>';
							strhtml=strhtml+str;
						})
					}
					$("#jiuh").html(strhtml)	
				}
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				var data=testdata2;
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
							str=str+'<dl>\
									<dt><img src="'+val.image+'" alt=""></dt>\
									<dd>\
										<div>'+val.productName+'</div>\
										<span>销量：'+val.salenum+'</span>\
										<p>￥'+val.priceArea+' <a href="javascript:void(0);" guid="'+val.guid+'" onclick="goodToCart(this)"><img src="../images/fl_24.png" alt=""></a></p>\
									</dd>\
								</dl>';
							strhtml=strhtml+str;
						})
					}
					$("#jiuh").html(strhtml)	
				}
			}
		});
	}
	//添加购物车
	function goodToCart(e){
	   var goodGuid=$(e).attr("guid");
	   var userId=$("#userId").val();
	   
	   var url=path+"app/purchase/goodToCart";
	   	//后台请求
		$.ajax({
			url:url,
			type: "GET",
			dataType: "JSON",
			data:{userId:userId,goodGuid:goodGuid,quantity:1},
			cache: false,
			async: true,
			success: function (data) {
				if (data!=null&&data.code==1) {
			        //刷新点赞数量
                    alert("添加成功");
				}
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				//刷新点赞数量
				alert("添加成功");
			}
		});
	}
</script>
</body>
</html>