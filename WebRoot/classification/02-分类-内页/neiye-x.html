<!--<!doctype html>-->
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Cache-Control" content="must-revalidate,no-cache"/>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
	<title>919</title>
	<link href="../css/style.css" type="text/css" rel="stylesheet" />
	<link href="../css/swiper.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="../js/jquery.js"></script>
     <script type="text/javascript" src="../js/swiper.js"></script>
      <script type="text/javascript" src="../../js/path.js?a=222"></script>
</head>
<body>

<div class="search">
	<a href=""><img src="../images/fl_03.png"></a><input type="text" id="productName" placeholder="搜索商品"><a href=""><img src="../images/fl_05.png" style="margin-left:1.2rem"></a><a href=""><img src="../images/fl_07.png" style="margin-left:1.2rem"></a>
</div>
<ul class="paix">
	<li class="zongh">综合排序 <img src="../images/fl_13.png"></li>
	<li>价格</li>
	<li>销量</li>
	<li class="shai" id='shaixuan'>筛选 <img src="../images/fl_16.png"></li>
</ul>

<div id="productList">
	<div class="shuj">
		<div class="shuj_left"><img src="../images/fl_21.png" alt=""></div>
		<div class="shuj_right">
			<div>茅台经典原浆</div>
			<p><span>￥1000</span><span>销量：1000</span><a><img src="../images/fl_24.png" alt=""></a></p>
		</div>
	</div>
	<div class="shuj">
		<div class="shuj_left"><img src="../images/fl_28.png" alt=""></div>
		<div class="shuj_right">
			<div>茅台经典原浆</div>
			<p><span>￥1000</span><span>销量：1000</span><a><img src="../images/fl_24.png" alt=""></a></p>
		</div>
	</div>
	<div class="shuj">
		<div class="shuj_left"><img src="../images/fl_21.png" alt=""></div>
		<div class="shuj_right">
			<div>茅台经典原浆</div>
			<p><span>￥1000</span><span>销量：1000</span><a><img src="../images/fl_24.png" alt=""></a></p>
		</div>
	</div>

	<div class="shuj">
		<div class="shuj_left"><img src="../images/fl_28.png" alt=""></div>
		<div class="shuj_right">
			<div>茅台经典原浆</div>
			<p><span>￥1000</span><span>销量：1000</span><a><img src="../images/fl_24.png" alt=""></a></p>
		</div>
	</div>

</div>

<!-- 隐藏区域 -->
<div class="bzhezhao"></div>
<ul class="zhpx">
	<li class="zhpjc">综合评价<img src="../images/dui_03.png"></li>
	<li>评价最好</li>
	<li>最新商品</li>
</ul>

<div class="screen">
	<div class="screen_head"><span class="quxiao qxs" onclick="clearChose()" >取消</span>筛选<span class="queding">确定</span></div>
	<ul class="sxs">
		<li>商品 <span class="zhuse" id="shangpinli">全部<img src="../images/you_03.png"></span></li>
		<li>品牌 <span class="zhuse" id="pinpaili">全部<img src="../images/you_03.png"></span></li>
		<li>国家 <span class="zhuse" id="guojiali">全部<img src="../images/you_03.png"></span></li>
		<li class="jiage">价格 <span class="zhuse" id="jiageli">全部<img src="../images/you_03.png"></span></li>
	</ul>
	<div class="clear" onclick="clearChose()">清除筛选条件</div>
</div>



<div class="screens" id="shangpindiv">
	<div class="screen_heads"><span class="quxiaos qxss" tag="shangpinli" onclick="backmenu(this)"><img src="../images/fl_03.png"></span>商品<!-- <span class="queding">确定</span> --></div>
	<ul class="sxss" id='shangpinul' tag="">
		<li class="zhuse" onclick="changeClass(this)" proclass="" tag="全部" >全部 <span class=""><img class="proclassli" src="../images/dui_03.png"></span></li>
		<!--<li>白酒 <span class="zhuse"></span></li>
		<li>红酒 <span class="zhuse"></span></li>
		<li>洋酒 <span class="zhuse"></span></li>
		<li>滋补品 <span class="zhuse"></span></li>
		<li>茶礼 <span class="zhuse"></span></li>-->
	</ul>
</div>


<div class="screens" id="pinpaidiv">
	<div class="screen_heads"><span class="quxiaos qxss" tag="pinpaili" onclick="backmenu(this)"><img src="../images/fl_03.png"></span>品牌<!-- <span class="queding">确定</span> --></div>
	<ul class="sxss" id='pinpaiul' tag="" >
		<li class="zhuse" onclick="changeBrand(this)" productGuid="" >全部 <span class="zhuse"><img class="productli" src="../images/dui_03.png"></span></li>
		<!--<li>白酒 <span class="zhuse"></span></li>
		<li>红酒 <span class="zhuse"></span></li>
		<li>洋酒 <span class="zhuse"></span></li>
		<li>滋补品 <span class="zhuse"></span></li>
		<li>茶礼 <span class="zhuse"></span></li>-->
		<!--<li proclass="ifwptiqtireptiqete">红酒 <span class="zhuse"></span></li><li proclass="tttttttttttttttttttttttttttttt">洋酒 <span class="zhuse"></span></li><li proclass="ec1b53847c0348d1824f0bcead68252b">白酒 <span class="zhuse"></span></li>-->
	</ul> 
</div>

<div class="screens" id="guojiadiv">
	<div class="screen_heads"><span class="quxiaos qxss" tag="guojiali" onclick="backmenu(this)"><img src="../images/fl_03.png"></span>国家<!-- <span class="queding">确定</span> --></div>
	<ul class="sxss" id='guojiaul' tag="">
		<li class="zhuse">全部 <span class="zhuse"><img src="../images/dui_03.png"></span></li>
		<!--<li>白酒 <span class="zhuse"></span></li>
		<li>红酒 <span class="zhuse"></span></li>
		<li>洋酒 <span class="zhuse"></span></li>
		<li>滋补品 <span class="zhuse"></span></li>
		<li>茶礼 <span class="zhuse"></span></li>-->
	</ul>
</div>

<div class="screenz">
	<div class="screen_heads"><span class="quxiaos qxsz" tag="jiageli" onclick="backmenu(this)"><img src="../images/fl_03.png"></span>价格<!-- <span class="queding">确定</span> --></div>
	<ul class="sxss" id="jiage" tag="">
		<li class="zhuse">全部 </li>
		<li>价格区间：<input type="text" id="priceOne"> - <input type="text" id="priceTwo"><span class="zhuse"><img src="../images/dui_03.png"></span></li>
	</ul>
</div>
<!-- 隐藏区域 -->
<input id="proClass" type="hidden" value="" tmpname="" />
<input id="productGuid" type="hidden"  value="" tmpname=""/>
<input id="choseNation" type="hidden" value="" tmpname=""/>
<input id="chosePrice" type="hidden" value="" tmpname="" /> 


<input id="userId" type="hidden" value=48 />
<input id="userName" type="hidden" value="apeic" />
<input id="userImage" type="hidden" value="apeic.jpg" />

<div class="zhezhao"></div>
<input type="hidden" id="initialproClass" value="baijiuClass" tagName="白酒"  />

<script type="text/javascript">
var testdata1={"code":1,"message":"操作成功","result":[{"name":"红酒","parent":"","id":1,"modifyTime":1508910641000,"createTime":1508347113000,"guid":"ifwptiqtireptiqete","grade":1,"pic":"6ea3de83432e4b93b562461ba410879b.png"},{"name":"洋酒","parent":"","id":4,"modifyTime":1508910453000,"createTime":1508859358000,"guid":"tttttttttttttttttttttttttttttt","grade":1,"pic":"25a7db51de7a4196bf0caa79f8208700.png"},{"name":"白酒","parent":"","id":5,"modifyTime":null,"createTime":1508910425000,"guid":"ec1b53847c0348d1824f0bcead68252b","grade":1,"pic":"a3ad19fdeb334544bb1fd9f99578100d.png"}]}
var testdata2={
    "code": 1,
    "message": "操作成功",
    "result": [
        {
            "name": "天之蓝",
            "id": 1,
            "guid": "1",
            "price": 800,
            "createTime": null,
            "image": null,
            "modifyTime": null,
            "remark": null,
            "proGuid": "1",
            "stock": 1000,
            "salenum": null,
            "isHot": 0,
            "isGround": 0,
            "seoDescription": null,
            "seoKeywords": null,
            "seoTitle": null
        },
		{
            "name": "海之蓝",
            "id": 1,
            "guid": "1",
            "price": 800,
            "createTime": null,
            "image": null,
            "modifyTime": null,
            "remark": null,
            "proGuid": "1",
            "stock": 1000,
            "salenum": null,
            "isHot": 0,
            "isGround": 0,
            "seoDescription": null,
            "seoKeywords": null,
            "seoTitle": null
        },
		{
            "name": "叶之绿",
            "id": 1,
            "guid": "1",
            "price": 800,
            "createTime": null,
            "image": null,
            "modifyTime": null,
            "remark": null,
            "proGuid": "1",
            "stock": 1000,
            "salenum": null,
            "isHot": 0,
            "isGround": 0,
            "seoDescription": null,
            "seoKeywords": null,
            "seoTitle": null
        }
    ]
};

var testdata3={
    "code": 1,
    "message": "操作成功",
    "result": [
        {
            "name": "俄罗斯伏特加voda[500ml]",
            "id": 21,
            "guid": "525adc48aa684e3a95761d23e38720c8",
            "price": 230,
            "createTime": 1510209865000,
            "image": "c1f8c1cbbacc4027a82f7a1c13d01cf1.png",
            "modifyTime": 1510209892000,
            "proGuid": "72ba3ae4817c4f3b97707dc242f8973d",
            "remark": "商品规格是500ml",
            "stock": 100,
            "salenum": null,
            "isHot": 0,
            "isGround": 1,
            "seoDescription": null,
            "seoKeywords": null,
            "seoTitle": null
        },
        {
            "name": "俄罗斯伏特加voda[750ml]",
            "id": 22,
            "guid": "f63c5f47e85146438b40cf2efc27b500",
            "price": 450,
            "createTime": 1510209870000,
            "image": "9418e7cd8d7c4c09a43d754a1efc2819.png",
            "modifyTime": 1510209914000,
            "proGuid": "72ba3ae4817c4f3b97707dc242f8973d",
            "remark": "商品规格是750ml",
            "stock": 200,
            "salenum": null,
            "isHot": 1,
            "isGround": 1,
            "seoDescription": null,
            "seoKeywords": null,
            "seoTitle": null
        }
    ]
};
//绑定数据
	$(document).ready(function(){ 
		 var curUrl=window.location.href;
         //var userId=curUrl.split('?')[1].split('&')[0].replace("userId=","");  
		//var userName=curUrl.split('?')[1].split('&')[1].replace("userName=","");
		//userName=decodeURI(userName);
		//var userImage=curUrl.split('?')[1].split('&')[2].replace("userImage=","");
		//userImage=decodeURI(userImage);
		//$("#userName").val(userName);
		//$("#userId").val(userId);
		//$("#userImage").val(userImage);
		//var productGuid=curUrl.split('?')[1].split('&')[3].replace("pro=","");
		//var productName=curUrl.split('?')[1].split('&')[4].replace("productName=","");
        
		/*暂不放开这段
		////按照种类查询（滋补品）
		//var proClass=curUrl.split('?')[1].split('&')[3].replace("proClass=",""); 
		////按品牌查询(白酒，洋酒)
		//var productGuid=curUrl.split('?')[1].split('&')[4].replace("productGuid=","");
		////按照国家查询(葡萄酒)
        //var nation=curUrl.split('?')[1].split('&')[5].replace("nation=","");
		////按照货品名称搜索
        //var productName=curUrl.split('?')[1].split('&')[6].replace("productName=","");
		//if(proClass!=""||proClass!=undefined||proClass!=null){
			//$("#proClass").val(proClass);
		//}
		//else if(productGuid!=""||productGuid!=undefined||productGuid!=null){
			//$("#productGuid").val(productGuid);
		//}
		//if(nation!=""||nation!=undefined||nation!=null){
			//$("#choseNation").val(nation);
		//}
		*/
		
		 //初始化默认种类
		 ////$("#initialproClass").val(proClass);
		////$("#initialproClass").attr('tagName',proClassName);
		getAllProClass();
		 //初始化加载列表(先根据货品产品名称超找，再根据产品标识符查找)
		 //if(productName!=""||productName!=undefined||productName!=null){
			 //goodsfindProductListByName(productName)
		//}else{
            //loadDataByPro(productGuid);
		//}
	});
	$(function(){
		$('.bzhezhao').hide();
		$('.zhpx').hide();
		$('.zongh').click(function(){
			$('.bzhezhao').show();
			$('.zhpx').show();
		});
		$('.zhpx li').click(function(){
			$('.bzhezhao').hide();
			$('.zhpx').hide();
		});


		$('.zhezhao').hide();
		$('.screen').hide();
		$('.shai').click(function(){
			//加载默认种类
            //$("#shangpinli").html($("#initialproClass").attr('tagName')+' <img src="../images/you_03.png">');
			//获取所有分类，并打钩当前默认分类
            ////getAllProClass();
			$('.zhezhao').show();
			$('.screen').show();
		});

		$('.qxs').click(function(){
			$('.screen').hide();
			$('.zhezhao').hide();
		});

		$('.screens').hide();
		//展示商品类别列表
		$('.sxs li:nth-child(1)').click(function(){
			//$('.screens').show();
			$("#shangpindiv").show();
		});
        //展示品牌列表
		$('.sxs li:nth-child(2)').click(function(){
			//根据分类获取品牌
			getGoodsByProClass();
			////$('#pinpaidiv').show();			
		});
		//展示国家列表
		$('.sxs li:nth-child(3)').click(function(){
			$('#guojiadiv').show();
		});

		$('.qxss').click(function(){
			$('.screens').hide();
		});


		$('.screenz').hide();
		$('.jiage').click(function(){
			$('.screenz').show();
		});
		$('.qxsz').click(function(){
			$('.screenz').hide();
		});

	});

	//获取所有分类
	function getAllProClass()
	{
		//后台请求
		$.ajax({
			url:path+'app/goods/getFirstGradeGoodsClass',
			type: "GET",
			dataType: "JSON",
			//dataType: "jsonp", 
			//jsonp:"callback", //这里定义了callback的参数名称，以便服务获取callback的函数名即getMessage  
			//jsonpCallback:"handleResponse", //这里定义了jsonp的回调函数  
			cache: false,
			async: true,
			//processData: false,
			//timeout: 2000,
			success: function (data) {
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
						    str=str+'<li onclick="changeClass(this)" tag="'+val.name+'" proclass="'+val.guid+'">'+val.name+' <span class="zhuse"><img class="classimg" style="display:none;" src="../images/dui_03.png"></span></li>';
							strhtml=strhtml+str;
						});
					}
					var allhtml=$("#shangpinul").html();
					console.log(allhtml+strhtml);
					//alert(allhtml+strhtml);
					$("#shangpinul").html(allhtml+strhtml);
					
				}
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				var strhtml="";
				var result=testdata1.result;
                $.each(result, function (index, val) {
					var str="";
					
					str=str+'<li onclick="changeClass(this)" tag="'+val.name+'" proclass="'+val.guid+'">'+val.name+' <span class="zhuse"><img class="classimg" style="display:none;" src="../images/dui_03.png"></span></li>';
					strhtml=strhtml+str;
				});
				var allhtml=$("#shangpinul").html();
				$("#shangpinul").html(allhtml+strhtml);
			}
		});

	}
//获取选中酒类
function changeClass(e){
		//$("."+etype).attr("class",etype);
		//$($(e).find("span")[0]).attr("class","zhuse "+etype); 
		var allspan=$(e).parent().find("span");  
		for(var j=0;j<allspan.length;j++){
			$($(allspan[j]).find("img")[0]).css("display","none");
		}
		$($($(e).find("span")[0]).find("img")[0]).css("display","");
		
		//记录选中商品(种类)
		var tmpname=$(e).attr("tag");
		var guid=$(e).attr("proclass");
		$("#proClass").val(guid);
		$("#proClass").attr("tmpname",tmpname);
}
	 //选中商品品牌
 function changeBrand(e){
	 $(".productli").css("display","none");
     $($(e).find("img")[0]).css("display","");
	 //记录选中商品(种类)
	 var tmpname=$(e).attr("tag");
	 $("#productGuid").val($(e).attr("productGuid"));
	 $("#productGuid").attr("tmpname",tmpname);
 }
//获取国家
function getAllNation(){
	//var tmpname=$(e).attr("tag");
	//$($(e).parent()).attr("tag",tmpname);
}
//回退按钮
function backmenu(e){
	//获取上一级的id
	var id=$(e).attr("tag");
	var tmp='<img src="../images/you_03.png">';
	//再上一级中记录选中项目
	var tmpname="";
	if(id=="shangpinli"){
		tmpname=$("#proClass").attr("tmpname");
	}
	if(id=="pinpaili"){
		tmpname=$("#productGuid").attr("tmpname");
	}
	if(id=="guojiali"){
		tmpname=$("#choseNation").attr("tmpname");
	}
	if(id=="jiageli"){
		tmpname=$("#priceOne").val()+"-"+$("#priceTwo").val();
		//记录价格
		$("#chosePrice").val(tmpname);
	}
	tmp=tmpname+tmp;
	$("#"+id).html(tmp);
}
//取消清除所选
function clearChose(){
	//商品种类
    $(".classimg").css("display","none");
    $(".proclassli").css("display","");
	//品牌
    $(".cleanBrand").remove();
    $(".productli").css("display","none");
	//国家

	//
	$("#proClass").val("");
	$("#productGuid").val("");
	$("#choseNation").val("");
	$("#chosePrice").val("");

	$("#proClass").attr("tmpname","");
	$("#productGuid").attr("tmpname","");
	$("#choseNation").attr("tmpname","");
	$("#chosePrice").attr("tmpname","");

	$("#shangpinli").html('全部 <img src="../images/you_03.png">');
	$("#pinpaili").html('全部 <img src="../images/you_03.png">');
	$("#guojiali").html('全部 <img src="../images/you_03.png">');
	$("#jiageli").html('全部 <img src="../images/you_03.png">');
}

	function handleResponse(data) {
        console.log("搜索商品");
    }

   //根据酒类标识获取商品(品牌)列表
   function getGoodsByProClass(){
	   var proClass=$("#proClass").val();
	   if(proClass==""||proClass==undefined||proClass==null){
		   alert("请您先选择商品");
		   return false;
	   }
       	//后台请求
		$.ajax({
			url:path+'app/goods/getGoodsByProClass',
			type: "GET",
			data:{proClass:proClass},
			dataType: "JSON",
			//dataType: "jsonp", 
			//jsonp:"callback", //这里定义了callback的参数名称，以便服务获取callback的函数名即getMessage  
			//jsonpCallback:"handleResponse", //这里定义了jsonp的回调函数  
			cache: false,
			async: true,
			//processData: false,
			//timeout: 2000,
			success: function (data) {
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
						    str=str+'<li onclick="changeBrand(this)" class="cleanBrand" tag="'+val.name+'" productGuid="'+val.guid+'">'+val.name+' <span class="zhuse"><img style="display:none;" src="../images/dui_03.png"></span></li>';
							strhtml=strhtml+str;
						});
					}
				}
				var tmp=$("#pinpaiul").html();
				strhtml=tmp+strhtml;
				$("#pinpaiul").html(strhtml);
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				data=testdata2;
				if (data!=null&&data.code==1) {
				//刷新页面					
				var result=data.result;
				var strhtml = "";
				if(result.length>0){
					$.each(result, function (index, val) {
						var str="";
						str=str+'<li onclick="changeBrand(this)" class="cleanBrand" tag="'+val.name+'" productGuid="'+val.guid+'">'+val.name+' <span class="zhuse"><img class="productli" style="display:none;" src="../images/dui_03.png"></span></li>';
						strhtml=strhtml+str;
					});
				 }
			     var tmp=$("#pinpaiul").html();
				 strhtml=tmp+strhtml;
				 $("#pinpaiul").html(strhtml);
			  }
		 }
	 });
	 $('#pinpaidiv').show();	
 }

   	//添加购物车
	function goodToCart(e){
	   var goodGuid=$(e).attr("guid");
	   var userId=$("#userId").val();
	   
	   var url=path+"app/purchase/goodToCart";
	   	//后台请求
		$.ajax({
			url:url,
			type: "GET",
			dataType: "JSON",
			data:{userId:userId,goodGuid:goodGuid,quantity:1},
			cache: false,
			async: true,
			success: function (data) {
				if (data!=null&&data.code==1) {
			        //刷新点赞数量
                    alert("添加成功");
				}
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				//刷新点赞数量
				alert("添加成功");
			}
		});
	}
	/**********************************************************************************************************/
	/**********************************************************************************************************/
	/**********************************************************************************************************/
	/**********************************************************************************************************/
	/**********************************************************************************************************/
	//根据品牌加载产品列表(初始化)
	function loadDataByPro(productGuid)
	{
		var url=path+"app/goods/getGoodsByProClass";
		
		if(productGuid==null||productGuid==undefined||productGuid=="")
		{
			alert("品牌加载出错");
            return false;
		}
		//后台请求
		$.ajax({
			url:url,
			type: "GET",
			data: {productGuid:productGuid},
			dataType: "JSON",
			//dataType: "jsonp", 
			//jsonp:"callback", //这里定义了callback的参数名称，以便服务获取callback的函数名即getMessage  
			//jsonpCallback:"handleResponse", //这里定义了jsonp的回调函数  
			cache: false,
			async: true,
			success: function (data) {
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
							str = str+'<div class="shuj"><div class="shuj_left">'+'<img src="'+val.image+'" alt=""></div>';
							str=str+'<div class="shuj_right">'+'<div>'+val.name+'</div>';
							str=str+'<p><span>￥'+val.price+'</span><span>销量：'+val.salenum+'</span><a href="javascript:void(0);" guid="'+val.guid+'" onclick="goodToCart(this)"><img src="../images/fl_24.png" alt=""></a></p>'
							str=str+'</div></div>';
							strhtml=strhtml+str;
						})
					}
					$("#productList").html(strhtml)	
				}
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				var data=testdata3;
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
							str = str+'<div class="shuj"><div class="shuj_left">'+'<img src="'+val.image+'" alt=""></div>';
							str=str+'<div class="shuj_right">'+'<div>'+val.name+'</div>';
							str=str+'<p><span>￥'+val.price+'</span><span>销量：'+val.salenum+'</span><a href="javascript:void(0);" guid="'+val.guid+'" onclick="goodToCart(this)"><img src="../images/fl_24.png" alt=""></a></p>'
							str=str+'</div></div>';
							strhtml=strhtml+str;
						})
					}
					$("#productList").html(strhtml)	
				}
			}
		});
	}
    //根据二级商品名称查找
	function goodsfindProductListByName(productName){
		var url=path+"app/goodsfindProductListByName";
		if(productName==null||productName==undefined||productName=="")
		{
			alert("请输入品牌名称");
            return false;
		}
		//后台请求
		$.ajax({
			url:url,
			type: "GET",
			data: {productName:productName},
			dataType: "JSON",
			//dataType: "jsonp", 
			//jsonp:"callback", //这里定义了callback的参数名称，以便服务获取callback的函数名即getMessage  
			//jsonpCallback:"handleResponse", //这里定义了jsonp的回调函数  
			cache: false,
			async: true,
			success: function (data) {
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
							str = str+'<div class="shuj"><div class="shuj_left">'+'<img src="'+val.image+'" alt=""></div>';
							str=str+'<div class="shuj_right">'+'<div>'+val.name+'</div>';
							str=str+'<p><span>'+val.price+'</span><span>销量：'+val.salenum+'</span><a href="javascript:void(0);" guid="'+val.guid+'" onclick="goodToCart(this)"><img src="../images/fl_24.png" alt=""></a></p>'
							str=str+'</div></div>';
							strhtml=strhtml+str;
						})
					}
					$("#productList").html(strhtml)	
				}
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				//alert(XMLHttpRequest.status);
				//alert(XMLHttpRequest.readyState);
				//alert(textStatus);
				var data=testdata3;
				if (data!=null&&data.code==1) {
					//刷新页面					
					var result=data.result;
					var strhtml = "";
					if(result.length>0){
						$.each(result, function (index, val) {
							var str="";
							str = str+'<div class="shuj"><div class="shuj_left">'+'<img src="'+val.image+'" alt=""></div>';
							str=str+'<div class="shuj_right">'+'<div>'+val.name+'</div>';
							str=str+'<p><span>'+val.price+'</span><span>销量：'+val.salenum+'</span><a href="javascript:void(0);" guid="'+val.guid+'" onclick="goodToCart(this)"><img src="../images/fl_24.png" alt=""></a></p>'
							str=str+'</div></div>';
							strhtml=strhtml+str;
						})
					}
					$("#productList").html(strhtml)	
				}
			}
		});
	}
</script>
</body>
</html>